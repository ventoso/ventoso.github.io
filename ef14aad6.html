<!DOCTYPE html><html lang="zh-CN"><head><title>Arch Linux 配置与调优 - 山丘</title><meta charset="UTF-8"><meta name="description" content="我一直试着去泰然处世。"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="msvalidate.01" content="908C9E240B6691AB529B463DC7FCC8C1"><meta name="baidu-site-verification" content="FK6mluFuje"><meta name="baidu-site-verification" content="g5CCwf777d"><meta name="baidu-site-verification" content="BAQOcQFru2"><link rel="shortcut icon" href="https://cdn.ventoso.top/wordpress/favicon.ico" type="image/png"><meta name="description" content="还是懒得看 wiki 啊,所以就写一些相关的。"><meta property="og:type" content="article"><meta property="og:title" content="Arch Linux 配置与调优"><meta property="og:url" content="https://www.lilineon.com/ef14aad6.html"><meta property="og:site_name" content="山丘"><meta property="og:description" content="还是懒得看 wiki 啊,所以就写一些相关的。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2020-04-25T02:08:24.000Z"><meta property="article:modified_time" content="2020-07-29T02:39:07.903Z"><meta property="article:author" content="TniAsu"><meta property="article:tag" content="折腾笔记"><meta property="article:tag" content="linux"><meta property="article:tag" content="arch"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/ventoso/ventoso.github.io@1.0.3/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/ventoso/ventoso.github.io@1.0.3/lib/mdui_043tiny/css/mdui.css,gh/ventoso/ventoso.github.io@latest/lib/iconfont/iconfont.css" crossorigin><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="山丘" type="application/atom+xml"></head><body class="mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image:url(https://cdn.ventoso.top/images/73032c9e550fc02235da772c02765af2.jpg!lite)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer"></div> <a href="/" title="TniAsu" class="mdui-btn mdui-btn-icon"><img src="https://cdn.ventoso.top/wordpress/avatar.png" alt="TniAsu"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer"><div class="nexmoe-avatar mdui-ripple"> <a href="/" title="TniAsu"><img src="https://cdn.ventoso.top/wordpress/avatar.png" alt="TniAsu" alt="TniAsu"></a></div><div class="nexmoe-count"><div><span>文章</span>10</div><div><span>标签</span>16</div><div><span>分类</span>2</div></div><div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}"><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页"><i class="mdui-list-item-icon nexmoefont icon-home"></i><div class="mdui-list-item-content"> 回到首页</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives/" title="文章归档"><i class="mdui-list-item-icon nexmoefont icon-container"></i><div class="mdui-list-item-content"> 文章归档</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="是友人们"><i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i><div class="mdui-list-item-content"> 是友人们</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于我的"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i><div class="mdui-list-item-content"> 关于我的</div></a></div><aside id="nexmoe-sidebar"><div class="nexmoe-widget-wrap"><div class="nexmoe-widget nexmoe-search"><form id="search_form" action_e="https://cn.bing.com/search?q=site:ventoso.cn" onsubmit="return search()"> <label><input id="search_value" name="q" type="search" placeholder="搜索"></label></form></div></div><div class="nexmoe-widget-wrap"><div class="nexmoe-widget nexmoe-social"><a class="mdui-ripple" href="https://space.bilibili.com/26525320" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color:#e76a8d;background-color:rgba(231,106,141,.15)"><i class="nexmoefont icon-bilibili"></i></a><a class="mdui-ripple" href="https://github.com/ventoso/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color:#191717;background-color:rgba(25,23,23,.15)"><i class="nexmoefont icon-github"></i></a><a class="mdui-ripple" href="https://x.ventoso.cn/" target="_blank" mdui-tooltip="{content: 'Project'}" style="color:#e76a8d;background-color:rgba(231,106,141,.15)"><i class="nexmoefont icon-appstore-fill"></i></a><a class="mdui-ripple" href="/atom.xml" target="_blank" mdui-tooltip="{content: 'Rss'}" style="color:#191717;background-color:rgba(25,23,23,.15)"><i class="nexmoefont icon-rss"></i></a></div></div><div class="nexmoe-widget-wrap"><div class="nexmoe-widget"><ul class="category-list"><li class="category-list-item"> <a class="category-list-link" href="/categories/何为折腾/">何为折腾</a> <span class="category-list-count">7</span></li><li class="category-list-item"> <a class="category-list-link" href="/categories/自说自话/">自说自话</a> <span class="category-list-count">3</span></li></ul></div></div><div class="nexmoe-widget-wrap"><br><div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow"> <a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size:10px">C语言</a> <a href="/tags/Vuepress/" style="font-size:10px">Vuepress</a> <a href="/tags/arch/" style="font-size:10px">arch</a> <a href="/tags/gulp/" style="font-size:10px">gulp</a> <a href="/tags/hexo/" style="font-size:10px">hexo</a> <a href="/tags/linux/" style="font-size:10px">linux</a> <a href="/tags/sharlist/" style="font-size:10px">sharlist</a> <a href="/tags/something/" style="font-size:16.67px">something</a> <a href="/tags/%E4%BA%91%E5%AD%98%E5%82%A8/" style="font-size:13.33px">云存储</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size:10px">优化</a> <a href="/tags/%E5%8A%A0%E9%80%9F/" style="font-size:10px">加速</a> <a href="/tags/%E5%A4%A9%E7%BF%BC%E4%BA%91/" style="font-size:10px">天翼云</a> <a href="/tags/%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/" style="font-size:20px">折腾笔记</a> <a href="/tags/%E8%87%AA%E8%AF%B4%E8%87%AA%E8%AF%9D/" style="font-size:13.33px">自说自话</a> <a href="/tags/%E8%B8%A9%E5%9D%91/" style="font-size:10px">踩坑</a> <a href="/tags/%E9%9A%8F%E5%BF%83/" style="font-size:10px">随心</a></div><script>for(var maxTagcloud=parseInt(10),tags_length=parseInt(16),tags_arr=[],i=0;i<tags_length;i++)tags_arr.push(i);tags_arr.sort(function(a,t){return.5<Math.random()?-1:1}),tags_arr=tags_arr.slice(0,maxTagcloud<tags_length?tags_length-maxTagcloud:0);for(var tag_i=0;tag_i<tags_arr.length;tag_i++)document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display="none"</script></div></aside><div class="nexmoe-copyright"> &copy; 2020 TniAsu Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a></div></div></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post"><div class="nexmoe-post-cover mdui-ripple" style="padding-bottom:42.857142857142854%"> <img data-src="https://cdn.ventoso.top/mount-fuji.jpg!tnia" data-sizes="auto" alt="Arch Linux 配置与调优" class="lazyload"></div><h2>Arch Linux 配置与调优</h2><div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important"><a><i class="nexmoefont icon-calendar-fill"></i> 2020年04月25日</a><a><i class="nexmoefont icon-areachart"></i> 4.1k 字</a><a><i class="nexmoefont icon-time-circle-fill"></i> 大概 18 分钟</a></div><div class="nexmoe-post-right"></div><article><p>还是懒得看 wiki 啊,所以就写一些相关的。</p><a id="more"></a><h2 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h2><p>前些日子尝试在电脑上装 arch ，参照着大佬：<a href="https://huanruomengyun.github.io/" target="_blank" rel="noopener">幻若梦云</a>写的 <a href="https://huanruomengyun.github.io/2020/03/25/Arch-Linux-Windows-安装教程/" target="_blank" rel="noopener">Arch Linux + Windows 双系统安装教程</a>，也算是成功地把arch linux装在了电脑上，但是装机之后，却发现网上地 arch linux 的配置教程却少的可怜，于是就想着自己写一些相关的配置过程。</p><p>Tip:配合<a href="https://huanruomengyun.github.io/2020/03/25/Arch-Linux-Windows-安装教程/" target="_blank" rel="noopener">Arch Linux + Windows 双系统安装教程</a>一起查阅更佳！且本篇皆是在<a href="https://huanruomengyun.github.io/2020/03/25/Arch-Linux-Windows-安装教程/" target="_blank" rel="noopener">Arch Linux + Windows 双系统安装教程</a>的基础上所进行的配置（暂时）。</p><h2 id="你所应该先知道的（备份相关）"><a href="#你所应该先知道的（备份相关）" class="headerlink" title="你所应该先知道的（备份相关）"></a>你所应该先知道的（备份相关）</h2><p>以下两条，你得知道的：</p><blockquote><ul><li><strong>滚动更新机制</strong>：所谓滚动更新就是指不能单独更新某个特定软件包，每次更新必须将全部软件包更新到最新</li></ul></blockquote><blockquote><ul><li><strong>滚挂</strong>：当有些软件包出现问题（如果是官方源的包，一般官网会告知），更新 (sudo pacman -Syyu) 之后可能会有整个系统挂掉的风险。</li></ul></blockquote><br><h3> 所以我们应该先了解的是——如何避免滚挂</h3><ol><li><p>良好的习惯，充足的准备。</p><p><strong>谨慎开启 test 库。</strong></p><p>多查看官网与社区了解详情。</p><br></li><li><p>准备一个 <strong>livecd</strong></p><p>时常备有一个 livecd ，以备在无法进入系统时仍然可以在 livecd 内挂载 /mnt 来 chroot 到你的 arch linux 来执行恢复等操作。</p><br></li><li><p>需要做的备份操作</p><br><p><strong>本文提供两种备份方式， Rsync 命令、tar 命令。</strong></p></li></ol><h3 id="Rsync"><a href="#Rsync" class="headerlink" title="Rsync"></a>Rsync</h3><p>rsync 命令由 Andrew Tridgell 和 Paul Mackerras 编写，于 1996年 首次发布。rsync 的主要目的是使一台计算机上的文件与另一台计算机上的文件远程同步。因此 名为 r sync (remote synchronize)</p><blockquote><p>rsync 能够用于同步两个目录或目录树，无论它们是在同一个计算机上还是不同的计算机上，而且不仅如此，它还能做到更多。它创建或者更新的目录与源目录完全一样。新的目录不是以 tar 或 zip 等打包存储，而是普通的目录和文件，常见的 Linux 工具都可以访问。</p><p>rsync 的最重要的特性之一是它处理源目录被修改的已有文件的方式。它使用分块校验来比较源文件和目标文件，而不是从源把整个文件复制过去。如果两个文件所有块的校验和都相同，那么就不用传输数据。否则只有被改变的块被传输。这样节约了远程同步消耗的大量时间和带宽。</p></blockquote><p>Rsync 是开源软件，通常每个Linux发行版都会带有此软件，但是鉴于 arch 的特性，如果如果没有，则</p><pre><code class="shell">sudo pacman -S rsync</code></pre><p><a href="https://wiki.archlinux.org/index.php/Rsync" target="_blank" rel="noopener">Arch Linux Wiki</a> 也提供了相应的脚本</p><blockquote><p>以下面的脚本为例，该脚本放置于 <code>/etc/cron.daily</code> 目录下，如果 cron <a href="https://wiki.archlinux.org/index.php/Daemon" target="_blank" rel="noopener">daemon</a> 被正确安装和配置，它将每天运行。配置和使用 <a href="https://wiki.archlinux.org/index.php/Cron" target="_blank" rel="noopener">cron</a> 是本文的范围之外。</p><p>首先，创建一个包含相应命令选项的脚本：</p><pre><code class="shell">/etc/cron.daily/backup
#!/bin/bash
rsync -a --delete /folder/to/backup /location/of/backup &amp;&gt; /dev/null</code></pre><p><code>-a</code></p><p>表示文件应被存档，这意味着他们的大部分特性被保留 (<strong>不</strong>包括ACLs, 硬链接或扩展属性，如&gt;capabilities)</p><p><code>--delete</code><br>指同步源文件的删除操作。</p><p>在这里，<code>/folder/to/backup</code> 应该改成需要被备份的路径 (比如 <code>/home</code>)，&gt;<code>/location/to/backup</code> 是备份应存放的位置 (比如 <code>/media/disk</code>).</p><p>最后，脚本必须是可执行的</p><pre><code class="shell"># chmod +x /etc/cron.daily/backup</code></pre></blockquote><br><h4 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h4><p>使用之前我们应该先知道 Rsync 的基本规范：</p><p><strong>Rsync命令格式</strong></p><pre><code class="shell"># 本地模式
rsync [OPTION...] SRC DEST</code></pre><p>上述命令中，SRC表示源地址，DEST表示目标地址，你需要遵照命令格式来输入命令来使用 rsync 。</p><p>上文引用部分给出的是一个每天自动备份的脚本，但是我们并不一定需要每天都进行备份，只要在需要备份时执行如下命令即可。</p><pre><code class="shell">rsync -av --delete /folder/to/backup /location/of/backup</code></pre><p>你说需要知道的是，上述命令中 /folder/to/backup 表示的是源地址，而 /location/of/backup 则表示目标地址。</p><p>参数详解：</p><ol><li><p><code>-a</code> 选项表示归档模式，它会保持权限、所有关系和符号（软）链接 ， 但是如果要保持硬链接可以用到参数 <code>-H</code> .</p><br></li><li><p><code>-v</code> 则会将详细信息展现在终端中。</p><br></li><li><p><code>-H</code> 选项用来保持硬链接。</p><br></li><li><p><code>--deletd</code> ：不加此条参数的话只是简单的增量同步，加上此条参数，rsync 会比对源目录与目的目录，如果你在源目录删除了某个文件，那么 rsync 也会将之前备份过的但是你在源目录删除的文件也删除，达到“文件完全同步”（当然这里指的完全同步并非实际的完全同步，同步程度是建立在其他参数上的）</p></li></ol><p>更多相关参数可以参阅 Senra 大佬的<a href="http://www.senra.me/rsync-documents-parameters-description-and-usage-examples/" target="_blank" rel="noopener">Rsync参数说明及使用文档</a> 罗列得非常详细。</p><h4 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h4><p> 恢复，测试备份文件是否完整复制粘贴覆盖即可。</p><h4 id="自动化"><a href="#自动化" class="headerlink" title="自动化"></a>自动化</h4><blockquote><p>I automated my backups because – “automate everything.” I wrote a BASH script that handles the details of creating a series of daily backups using rsync. This includes ensuring that the backup medium is mounted, generating the names for yesterday and today’s backup directories, creating appropriate directory structures on the backup medium if they are not already there, performing the actual backups and unmounting the medium.<br>I run the script daily, early every morning, as a cron job to ensure that I never forget to perform my backups.<br>My script, rsbu, and its configuration file, rsbu.conf, are available at <a href="https://github.com/opensourceway/rsync-backup-script" target="_blank" rel="noopener">https://github.com/opensourceway/rsync-backup-script</a></p></blockquote><p> 参照 <a href="https://opensource.com/article/17/1/rsync-backup-linux" target="_blank" rel="noopener">相关文章</a> 或 <a href="https://wiki.archlinux.org/index.php/Rsync" target="_blank" rel="noopener">Arch linux wiki</a> 可以使用 <a href="https://wiki.archlinux.org/index.php/Cron" target="_blank" rel="noopener">cron</a> 来实现自动化，相关脚本和配置文件可以从 <a href="https://github.com/opensourceway/rsync-backup-script" target="_blank" rel="noopener">上文引用处链接</a> 获得。</p><p>其他的：rsync 的其他操作，arch Linux wiki 第一条将它作为 cp 命令的高级替代品，此外 rsync 还可以备份服务器到本地等操作，是一个值得研究倒腾的命令（软件），其他玩法可以查看 <a href="https://wiki.archlinux.org/index.php/Rsync" target="_blank" rel="noopener">arch Linux wiki</a></p><h3 id="tar-命令"><a href="#tar-命令" class="headerlink" title="tar 命令"></a>tar 命令</h3><p> 常用的备份命令是</p><pre><code class="shell">tar cvpjf backup.tar.bz2 --exclude-from=excl /</code></pre><p> 根目录通过 tar 命令打包 为 .tar.bz2 文件，需要恢复时只需要解打包覆盖即可。</p><pre><code class="shell">tar -jxvf backup.tar.bz2 -C /</code></pre><h2 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h2><h3 id="添加新用户"><a href="#添加新用户" class="headerlink" title="添加新用户"></a><strong>添加新用户</strong></h3><p>此番配置在<a href="https://huanruomengyun.github.io/2020/03/25/Arch-Linux-Windows-安装教程/" target="_blank" rel="noopener">Arch Linux + Windows 双系统安装教程</a>中已经提到过，但是我在这里踩了坑，所以在这里重提一次（凑字数）。</p><p>在使用图形界面时，桌面管理器往往只提供用户登录而不会显示 ROOT 用户，为了能够进入到桌面，我们需要做出如下操作。众所周知，权力是把双刃剑，而在平时使用时，如果不创建普通用户，只使用 root 用户的话，可能就会面临一些因为权限过高而产生的问题：</p><ul><li>诸如 <code>rm -rf /*</code> 等一些著名命令</li><li>使用 root 强行覆盖权限也会给如果使用计算机的他人带来不便（如果有）</li></ul><p>所以我们就有必要来添加一个普通用户作为日常使用者。</p><pre><code class="shell">#添加新用户
useradd -m -G wheel -s /bin/bash 用户名
#设置密码
passwd 用户名 #输入此条命令后按照输出内容输入密码,密码需要输入两次，且密码不会显示</code></pre><p>你需要注意的是：此时你创建的用户名 需要符合命名规范（基本上只要注意首字母不能大写就行了，其余规范尚在考证……），我在这里遇到的坑就是使用了大写字母开头，而导致无法创建用户。</p><h3 id="为wheel组配置sudo权限"><a href="#为wheel组配置sudo权限" class="headerlink" title="为wheel组配置sudo权限"></a><strong>为wheel组配置sudo权限</strong></h3><p>但是普通用户权力有限，一些基本操作诸如安装软件<code>#pacman -S 包名</code> 具有修改写入类型的操作普通用户是无法执行的，这时候就要接 root (su) 之手来执行这些命令了，但是如果安装一个软件就要切换到 root 用户，未免有些麻烦，所以 linux 为我们提供了一种更为便捷的操作，那就是 sudo ，按需执行 root 权限命令（仅个人理解）。</p><p><code>sudo</code> 作为一个软件包的形式存在，在 arch linux 中一般都会包含在 <code>base-devel</code> 中，若是安装系统时已经装过<code>base-devel</code>就无需再进行安装。</p><p>否则，</p><pre><code class="shell">pacman -S base-devel #此时还没有配置sudo，所以应该在root下执行该命令</code></pre><p><strong>或，</strong></p><pre><code class="shell">pacman -S sudo #此时还没有配置sudo，所以应该在root下执行该命令</code></pre><p>编辑 sudoers 文件：</p><pre><code class="shell">visudoers 
#此条命令默认使用的是vi编辑器，如果没有安装vi，可以先将自己所用的编辑器创建一个软连接到/usr/bin/vi
#执行
ln -s /usr/bin/vim /usr/bin/vi #此处的vim替换为自己所用的编辑器即可
visudoers</code></pre><p>执行上方命令来进行配置，在文件中找到如下两行，一般在文件尾部，辨识度不高，一定要仔细，不要找错。</p><pre><code>## Uncomment to allow members of group wheel to execute any command
# %wheel ALL=(ALL) ALL</code></pre><p>根据翻译可知道，去掉注释，wheel 组就可以执行任何命令，根据提示去 <code>%wheel ALL=(ALL) ALL</code> 前面的 <code>＃</code> 掉注释即可,如下。</p><pre><code>## Uncomment to allow members of group wheel to execute any command
%wheel ALL=(ALL) ALL</code></pre><p>接着按照编辑器所提供的命令来保存。</p><p> <code>vim</code> 可以使用 <code>esc</code> 来退出编辑模式，接着输入 <code>:wq!</code> 来强制保存。</p><p>接着可以登录刚刚创建的用户并尝试 <code>sudo</code> 命令</p><h3 id="加入Archlinuxcn源"><a href="#加入Archlinuxcn源" class="headerlink" title="加入Archlinuxcn源"></a><strong>加入Archlinuxcn源</strong></h3><p>以 <code>root</code> 或 <code>sudo</code> 形式编辑 <code>/etc/pacman.conf</code></p><pre><code class="shell">sudo vim /etc/pacman.conf</code></pre><p>在文件末加入官方archlinuxcn镜像源</p><pre><code class="、">[archlinuxcn]
Server = http://repo.archlinuxcn.org/$arch</code></pre><p>或加入其他国内源</p><pre><code>## 浙江大学 (浙江杭州) (ipv4, ipv6, http, https)
## Added: 2017-06-05
[archlinuxcn]
Server = https://mirrors.zju.edu.cn/archlinuxcn/$arch

## 中国科学技术大学 (ipv4, ipv6, http, https)
[archlinuxcn]
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch

## 清华大学 (ipv4, ipv6, http, https)
[archlinuxcn]
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch

## Our main server (ipv4, ipv6, http, https)
## Our main server located in Netherlands
[archlinuxcn]
Server = https://repo.archlinuxcn.org/$arch

## xTom (Hong Kong server) (Hong Kong) (ipv4, ipv6, http, https)
## Added: 2017-09-18
## xTom Hong Kong Mirror
[archlinuxcn]
Server = https://mirror.xtom.com.hk/archlinuxcn/$arch

## xTom (US server) (US) (ipv4, ipv6, http, https)
## Added: 2019-02-19
## xTom US Mirror
[archlinuxcn]
Server = https://mirror.xtom.com/archlinuxcn/$arch

## xTom (Netherlands server) (Netherlands) (ipv4, ipv6, http, https)
## Added: 2019-09-07
## xTom Netherlands Mirror
[archlinuxcn]
Server = https://mirror.xtom.nl/archlinuxcn/$arch

## Open Computing Facility, UC Berkeley (Berkeley, CA, United States) (ipv4, ipv6, http, https)
## Added: 2019-02-19
[archlinuxcn]
Server = https://mirrors.ocf.berkeley.edu/archlinuxcn/$arch

## 上海科技大学 (上海) (ipv4, http, https)
## Added: 2016-04-07
[archlinuxcn]
Server = https://mirrors-wan.geekpie.club/archlinuxcn/$arch

## 网易 (ipv4, http, https)
[archlinuxcn]
Server = https://mirrors.163.com/archlinux-cn/$arch

## 重庆大学 (ipv4, http, https)
[archlinuxcn]
Server = https://mirrors.cqu.edu.cn/archlinuxcn/$arch

## SJTUG 软件源镜像服务 (ipv4, https)
## Added: 2018-05-21
[archlinuxcn]
Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux-cn/$arch

## 莞工 GNU/Linux 协会 开源软件镜像站 (ipv4, http, https)
## Added: 2018-11-03
[archlinuxcn]
Server = https://mirrors.dgut.edu.cn/archlinuxcn/$arch

## 腾讯云 (ipv4, https)
## Added: 2018-11-23
[archlinuxcn]
Server = https://mirrors.cloud.tencent.com/archlinuxcn/$arch</code></pre><p>镜像源转自<a href="https://github.com/archlinuxcn/mirrorlist-repo" target="_blank" rel="noopener">传送门</a></p><p>接着检查更新并导入 PGP Keys ：</p><pre><code class="shell">sudo pacman -Syy &amp;&amp; sudo pacman -S archlinuxcn-keyring</code></pre><p>这一步是必要的，否则会出现验证密钥错误而导致无法安装应用等问题。</p><h3 id="AUR"><a href="#AUR" class="headerlink" title="AUR"></a><strong>AUR</strong></h3><p>AUR ： Arch User Repository<br>Arch 用户软件仓库，安装需要编译，虽然速度稍慢，但是 AUR 提供的软件包非常之多，Pacman + AUR 所有需要的软件几乎都可以找到。这也是 Arch 的强大之处！</p><p>虽然 AUR 很强大，但是从 AUR 里安装应用仍然不是一件方便简单的事情，所以 AUR 软件包管理器（aur 助手）就横空出世了，此类软件也很多，但是目前推荐使用 Yay(Yet another Yogurt) 来管理 AUR 软件包。</p><p><code>Archlinuxcn</code> 源里面已经有了预编译的 <code>yay</code> 包，无需编译安装，直接使用 <code>pacman</code> 安装即可</p><pre><code class="shell">sudo pacman -S yay</code></pre><p>Yay 的命令与选项与 pacman 非常相似，因此在日常使用下，就可以使用简洁的 <code>yay</code> 替代 <code>sudo pacman</code><br>如：</p><pre><code class="shell"> $ yay -S netease-cloud-music</code></pre><p>安装完成后就可以根据需求安装软件了！<br>这里贴出一些常用软件</p><pre><code class="shell"># wps
$ yay -S wps-office # wps好评

$ yay -S ttf-wps-fonts # wps所需字体


$ yay -S google-chrome #谷歌浏览器

$ yay -S git #git版本控制器

$ yay -S typora #markdown编辑器

$ yay -S ranger # 终端文件浏览器

$ yay -S netease-cloud-music #网易云音乐

$ yay -S baidunetdisk # 百度网盘

$ yay -S wiznote #为知云笔记

$ yay -S deepin-screenshot #深度截图

$ yay -S telegram-desktop #tg</code></pre><br><ul><li><strong>国内生态的解决方案</strong>:</li></ul><p>wine 已经很不错了，但是其需要一大堆的 32 位依赖，以及其不稳定的缺点，如果想要在 linux 下运行诸如 qq wechat 此类软件，建议还是安心虚拟机吧。</p><ul><li><p><strong>中文输入法(此处只记录fcitx)</strong></p><pre><code class="shell">sudo pacman -S fcitx-qt4 kcm-fcitx fcitx-sogoupinyin #根据个人喜好自行替换</code></pre><p>全部安装</p><p>接着配置.xprofile文件</p><pre><code class="shell">vim ~/.xprofile</code></pre><p>在里面加入</p><pre><code>export GTK_IM_MODULE=fcitx

export QT_IM_MODULE=fcitx

export XMODIFIERS=&quot;@im=fcitx&quot;</code></pre><p>注销再登入即可配置输入法。</p></li></ul><h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>介绍 fish shell 和 zsh .</p><h4 id="Fish"><a href="#Fish" class="headerlink" title="Fish"></a>Fish</h4><p><strong>fish shell</strong> 在没有遇到它之前，我一直以为 zsh 是最好的 shell 解决方案，但 zsh 臃肿的体积和缓慢的加载速度时常让我感到着急，但是直到有一天我遇见了 fish shell ！</p><p>优美简洁的外观，飞快的访问速度，拥有像 zsh 中 oh-my-zsh 一样的 oh-my-fish 和 fisher ，强大的插件系统，非常简单的配置方式，让我一下子就爱上了 fish shell 。</p><pre><code class="shell">yay -S fish </code></pre><p>一条命令就可以直接安装。</p><pre><code class="shell">fish</code></pre><p>输入即可切换到 fish shell ！体验简洁又好看的 fish shell ！</p><pre><code class="shell">$ which fish #输入查询 fish 安装路径，一般都在 /usr/bin/fish

/usr/bin/fish #输出了 fish 的路径，根据此行输出结果填入下行来切换默认shell

$ chsh -s /usr/bin/fish</code></pre><p>上文提到配置 fish 及其方便，确实，只需要在终端中输入 fish_config 就可以呼出浏览器在浏览器里实时预览不同的配色和样式来配饰你自己的 fish 了。</p><p><strong>fish 插件：oh-my-fish、fisher</strong></p><p> fish 拥有像 zsh 中的 oh-my-zsh 一样的强大的插件，但是前者的插件并非像后者一样全部集成，而是 只提供了一些必要的插件，不会拖累速度，需要时安装即可，更体现了 arch linux 的高度自定义！</p><ol><li><p>oh-my-fish</p><pre><code class="shell">curl -L https://get.oh-my.fish | fish</code></pre><p>输出 <code>Installation successful</code> 即完成安装。此时提示符也更改成了另一个样式。且窗口右方也多了一个时间显示。</p><p>使用 oh-my-fish 时只需要在 shell 中输入 <code>omf</code> 即可查看相关命令。</p><ol><li><p>一些有趣的插件</p><p>天气插件</p><pre><code class="shell">omf install wttr</code></pre><p>输入即可安装 wttr 天气插件，安装完成后在 shell 中输入 <code>wttr</code> 即可显示当地近几日的天气，打印出来的天气状况生动形象，非常有趣。</p></li></ol></li><li><p>fisher</p><pre><code class="shell">curl https://git.io/fisher --create-dirs -sLo ~/.config/fish/functions/fisher.fish</code></pre><p>输入即可安装 fisher 兼容所有 oh-my-fish 的包，同样是十分强大</p><h4 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h4></li></ol><ul><li>并非最优选择</li></ul><pre><code class="shell">$ sudo pacman -S zsh

$ sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; # 下载并配置ohmyzsh

$ chsh -s /bin/zsh  #更换默认bash，重启后生效</code></pre><p>按照上方 fish 中的切换默认 shell 的方式使用 chsh 命令来切换至 zsh 即可</p><p>考虑到 oh-my-zsh of zsh 的体积非常臃肿，我找到了以下方案来施以优化。</p><ol><li><p>powerlevel10k</p><p>不得不说，这款主题非常好看，而且对于 zsh 有较大的性能提升。</p><blockquote><p>Powerlevel10k is a backward-compatible reimplementation of the popular Powerlevel9k theme (see above) with 10-100 times better performance. If you like the looks of Powerlevel9k but feeling frustrated by its slow prompt, simply replace your powerlevel9k theme with powerlevel10k and enjoy responsive shell like it’s 80’s again! Powerlevel10k uses the same configuration options as Powerlevel9k and produces the same results. It’s simply faster.</p></blockquote></li></ol><p>背靠 pacman 和 aur 安装起来也是非常简单</p><pre><code class="Shell">$ yay -S zsh-theme-powerlevel10k</code></pre><p>重启终端，会进行配置 powerlevel10k 根据自己的口味一步一步来即可。</p><ol start="2"><li><p>zinit</p><blockquote><p>该部分内容正在编辑中</p></blockquote></li></ol><p><strong>参考</strong>：</p><ol><li><a href="https://wiki.archlinux.org/index.php/Rsync" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/Rsync</a></li><li><a href="https://opensource.com/article/17/1/rsync-backup-linux" target="_blank" rel="noopener">https://opensource.com/article/17/1/rsync-backup-linux</a></li><li><a href="http://www.senra.me/rsync-documents-parameters-description-and-usage-examples/" target="_blank" rel="noopener">http://www.senra.me/rsync-documents-parameters-description-and-usage-examples/</a></li><li><a href="https://rsync.samba.org/FAQ.html" target="_blank" rel="noopener">https://rsync.samba.org/FAQ.html</a></li><li><a href="https://huanruomengyun.github.io/2020/03/25/Arch-Linux-Windows-安装教程/" target="_blank" rel="noopener">Arch Linux + Windows 双系统安装教程</a></li></ol></article><div class="nexmoe-post-meta nexmoe-rainbow"> <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E4%BD%95%E4%B8%BA%E6%8A%98%E8%85%BE/">何为折腾</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/arch/" rel="tag">arch</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/linux/" rel="tag">linux</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/%E6%8A%98%E8%85%BE%E7%AC%94%E8%AE%B0/" rel="tag">折腾笔记</a></div><div class="nexmoe-post-footer"><div class="nexmoe-post-copyright"> <strong>本文作者：</strong>TniAsu<br> <strong>本文链接：</strong><a href="https://www.lilineon.com/ef14aad6.html" title="https:&#x2F;&#x2F;www.lilineon.com&#x2F;ef14aad6.html" target="_blank" rel="noopener">https:&#x2F;&#x2F;www.lilineon.com&#x2F;ef14aad6.html</a><br> <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可，转载请表明出处</div><section class="nexmoe-comment"><div class="valine"></div><script src="https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js"></script><script>new Valine({el:".valine",appId:"BbVcftus8mMdsLphJWVahErh-gzGzoHsz",appKey:"gmauQlfIJgosJI0rqaGUvtN0"})</script></section></div></div></div></div><script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js,gh/nexmoe/nexmoe.github.io@latest/js/app.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="//instant.page/3.0.0" type="module" defer="defer" integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>